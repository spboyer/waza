# Troubleshoot Function App
id: troubleshoot-function-001
name: Troubleshoot Function App Issues
description: Test diagnosing and resolving common Azure Functions issues

inputs:
  prompt: "My Azure Function is timing out. How do I debug and fix this?"
  context:
    project_type: "azure-functions"
    issue: "timeout"
    plan_type: "consumption"

expected:
  outcomes:
    - type: diagnosis_provided
    - type: solution_suggested

  output_contains:
    - "timeout"

  tool_calls:
    required: []
    forbidden:
      - pattern: "azd down"
      - pattern: "delete"

  behavior:
    max_tool_calls: 15
    max_iterations: 5

graders:
  - name: timeout_addressed
    type: code
    assertions:
      - "'timeout' in output.lower()"

  - name: solutions_provided
    type: regex
    config:
      pattern: "functionTimeout|host\\.json|Premium|Durable|async"
      should_match: true

  - name: monitoring_mentioned
    type: regex
    config:
      pattern: "Application Insights|logs|logstream|monitor"
      should_match: true
