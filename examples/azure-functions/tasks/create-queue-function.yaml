# Create Queue Triggered Function
id: create-queue-function-001
name: Create Queue Triggered Function
description: Test creating a function with Azure Storage Queue trigger

inputs:
  prompt: "Create an Azure Function that processes messages from an Azure Storage Queue"
  context:
    project_type: "existing"
    language: "javascript"

expected:
  outcomes:
    - type: function_created
    - type: binding_configured

  output_contains:
    - "queue"

  tool_calls:
    required:
      - pattern: "func new|function"
    forbidden:
      - pattern: "rm -rf"

  behavior:
    max_tool_calls: 15
    max_iterations: 5

graders:
  - name: queue_trigger_created
    type: code
    assertions:
      - "'queue' in output.lower()"

  - name: storage_binding
    type: regex
    config:
      pattern: "queue.*trigger|QueueTrigger|storage.*queue"
      should_match: true
